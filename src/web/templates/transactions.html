{% extends "base.html" %}

{% block title %}Create Transaction - Blockchain App{% endblock %}

{% block content %}
    <div class="header">
        <h1>Create a New Transaction</h1>
    </div>
    <div class="form-container mx-auto" style="max-width: 500px;">
        <form id="transaction-form">
            <div class="form-group">
                <label for="sender">Sender</label>
                <input type="text" class="form-control" id="sender" name="sender" required>
            </div>
            <div class="form-group">
                <label for="receiver">Receiver</label>
                <input type="text" class="form-control" id="receiver" name="receiver" required>
            </div>
            <div class="form-group">
                <label for="amount">Amount</label>
                <input type="number" class="form-control" id="amount" name="amount" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Create Transaction</button>
        </form>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        document.getElementById('transaction-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const sender = document.getElementById('sender').value;
            const receiver = document.getElementById('receiver').value;
            const amount = document.getElementById('amount').value;

            fetch('/transactions/new', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ sender: sender, receiver: receiver, amount: amount })
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        });
    </script>
{% endblock %}
